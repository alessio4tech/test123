1                                                          The SAS System                          Friday, July  9, 2021 07:50:00 AM

NOTE: Copyright (c) 2016 by SAS Institute Inc., Cary, NC, USA. 
NOTE: SAS (r) Proprietary Software V.03.05 (TS5M0 MBCS3170) 
      Licensed to HSBC CRED DEC UK- PROD. PATCH/DEV, Site 70262168.
NOTE: This session is executing on the Linux 3.10.0-693.11.1.el7.x86_64 (LIN X64) platform.



NOTE: Analytical products:
      
      SAS/STAT 15.1

NOTE: Additional host information:

 Linux LIN X64 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 CentOS Linux release 7.4.1708 (Core)  

NOTE: SAS initialization used:
      real time           0.02 seconds
      cpu time            0.04 seconds
      
1          /* Write log output from included programs */
2          options source2 macrogen symbolgen mlogic mprint;
3          
4          /* Load var setting script */
5          %let curdir=%sysget(curdir);
6          %let file=/setvars.sas;
7          %include "&curdir.&file.";
SYMBOLGEN:  Macro variable CURDIR resolves to /home/centos/perf-army/casperf_baseline-master
SYMBOLGEN:  Macro variable FILE resolves to /setvars.sas
NOTE: %INCLUDE (level 1) file /home/centos/perf-army/casperf_baseline-master/setvars.sas is file 
      /home/centos/perf-army/casperf_baseline-master/setvars.sas.
8         +/* Set variables for environment */
9         +/* ----------------------------- */
10        +%let runplatform="Viya3-5 Army";  /*Give a name to your platform and possibly add
11        +an identifier for an individual run if you plan several per day. Run date is captured
12        +automatically.  This will serve to compare individual runs later in reporting. */
13        +
14        +%let cassrv=node3.cluster.local;  /* CAS controller hostname */
15        +
16        +%let targlib=public;  /* CAS library that will host the generated data sets while
17        +running the tests and the final performance data set. */
18        +
19        +%let perftable=perf_stats; /*CAS table to hold the performance stats.*/
20        +
21        +%let usr=alessiot;  /*User used to connect to CAS.  Should be the one in the .authinfo file. */
22        +
23        +%let nworkers=1; /* number of CAS worker nodes in setup.  0 for SMP.*/
24        +
25        +%let coresw=8; /*number of cores per CAS worker node (or controller in SMP), obtained
26        +through eg. lscpu*/
27        +
28        +%let ghzw=2.0; /*speed of the CAS worker's cpu's, obtained through eg. lscpu*/
29        +
30        +%let memw=32; /*memory per CAS worker node, eg. vmstat -s*/
31        +
32        +
33        +
34        +
35        +
2                                                          The SAS System                          Friday, July  9, 2021 07:50:00 AM

36        +/*---------------------------------------------------*/
37        +/*Code defined for other scripts.  Don't change this.*/
38        +/* Capture script input */
39        +%let conc = %sysget(conc);
WARNING: The argument to macro function %SYSGET is not defined as a system variable.
40        +%let dataset=%sysget(data);
WARNING: The argument to macro function %SYSGET is not defined as a system variable.
41        +%let rundate=%sysget(rundate);
WARNING: The argument to macro function %SYSGET is not defined as a system variable.
42        +%let curdir=%sysget(curdir);
43        +%let authfile=/.authinfo;
44        +%let authinfo=&curdir.&authfile.;
SYMBOLGEN:  Macro variable CURDIR resolves to /home/centos/perf-army/casperf_baseline-master
SYMBOLGEN:  Macro variable AUTHFILE resolves to /.authinfo
45        +%let bigdiskloc=&curdir.;
SYMBOLGEN:  Macro variable CURDIR resolves to /home/centos/perf-army/casperf_baseline-master
46        +
47        +/*Define macro to set record count for dataset*/
48        +%macro get_table_size(inset,macvar);
49        + data _null_;
50        +  set &inset NOBS=size;
51        +  call symput("&macvar",size);
52        + stop;
53        + run;
54        +%mend;
55        +
56        +/*Define result writing macro*/
57        +%macro recordperf();
58        +data work.tempperf;
59        +		format rundate ddmmyy10.;
60        +		
61        +		runplatform=&runplatform.;
62        +		rundate=%sysfunc(inputn(&rundate.,ddmmyy10.));
63        +		nworkers=&nworkers.;
64        +		coresw=&coresw.;
65        +		ghzw=&ghzw.;
66        +		memw=&memw.;
67        +		qclass=&qclass.;
68        +		graph=&graph.;
69        +		query=&qname.;
70        +		reccount=&reccount.;
71        +		concses=&conc.;
72        +		runtime = &stoptime.-&starttime.;
73        +run;
74        +
75        +proc append base=bigdisk.perfstats_mc data=work.tempperf;
76        +run;
77        +%mend;
78        +/*---------------------------------------------------*/
NOTE: %INCLUDE (level 1) ending.
79         
80         /*  Start a session named mySession using the existing CAS server connection */
81         /*  Assign SAS libs to CAS libs                                              */
82         
83         options cashost="&cassrv." casport=5570 ;
SYMBOLGEN:  Macro variable CASSRV resolves to node3.cluster.local
84         /*options fullstimer;*/
85         
3                                                          The SAS System                          Friday, July  9, 2021 07:50:00 AM

86         cas mySession sessopts=(caslib=&targlib. timeout=1800 locale="en_US")
SYMBOLGEN:  Macro variable TARGLIB resolves to public
87         user="&usr." authinfo="&authinfo.";
SYMBOLGEN:  Macro variable USR resolves to alessiot
SYMBOLGEN:  Macro variable AUTHINFO resolves to /home/centos/perf-army/casperf_baseline-master/.authinfo
NOTE: The session MYSESSION connected successfully to Cloud Analytic Services node3.cluster.local using port 5570. The UUID is 
      c2080962-bc21-fb4d-90e6-c2595f075e12. The user is alessiot and the active caslib is CASUSERHDFS(alessiot).
NOTE: The SAS option SESSREF was updated with the value MYSESSION.
NOTE: The SAS macro _SESSREF_ was updated with the value MYSESSION.
NOTE: The session is using 1 worker.
NOTE: 'Public' is now the active caslib.
NOTE: The CAS statement request to update one or more session options for session MYSESSION completed.
88         caslib _all_ assign;
NOTE: A SAS Library associated with a caslib can only reference library member names that conform to SAS Library naming conventions.
NOTE: CASLIB CASUSER(alessiot) for session MYSESSION will be mapped to SAS Library CASUSER.
NOTE: CASLIB CASUSERHDFS(alessiot) for session MYSESSION will be mapped to SAS Library CASUSERH.
NOTE: CASLIB Formats for session MYSESSION will be mapped to SAS Library FORMATS.
NOTE: CASLIB HSBC for session MYSESSION will be mapped to SAS Library HSBC.
NOTE: CASLIB ModelPerformanceData for session MYSESSION will not be mapped to SAS Library ModelPerformanceData. The CASLIB name is 
      not valid for use as a libref.
NOTE: CASLIB Models for session MYSESSION will be mapped to SAS Library MODELS.
NOTE: CASLIB Public for session MYSESSION will be mapped to SAS Library PUBLIC.
NOTE: CASLIB Samples for session MYSESSION will be mapped to SAS Library SAMPLES.
NOTE: CASLIB SystemData for session MYSESSION will not be mapped to SAS Library SystemData. The CASLIB name is not valid for use as 
      a libref.
NOTE: CASLIB mycaslib for session MYSESSION will be mapped to SAS Library MYCASLIB.
89         
90         /* Define library holding the original data set.*/
91         libname bigdisk "&bigdiskloc." FILELOCKWAIT=30;
SYMBOLGEN:  Macro variable BIGDISKLOC resolves to /home/centos/perf-army/casperf_baseline-master
NOTE: Libref BIGDISK was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: /home/centos/perf-army/casperf_baseline-master
92         
93         /*Capture input from Shell script*/
94         %let starttable = %sysget(starttable);
95         %let targettable=%sysget(targettable);
96         %let step=%sysget(step);
97         
98         /*Loading original data set to CAS for in-memory replication.*/
SYMBOLGEN:  Macro variable TARGLIB resolves to public
SYMBOLGEN:  Macro variable STARTTABLE resolves to megacorp5_1m
99         data &targlib..&starttable. (promote=yes);
100        	
SYMBOLGEN:  Macro variable STARTTABLE resolves to megacorp5_1m
100      !  set bigdisk.&starttable.;
101        run;

NOTE: The data set MEGACORP5_1M was promoted.
NOTE: There were 1200000 observations read from the data set BIGDISK.MEGACORP5_1M.
NOTE: The data set PUBLIC.MEGACORP5_1M has 1200000 observations and 46 variables.
NOTE: DATA statement used (Total process time):
      real time           13.14 seconds
      cpu time            2.59 seconds
      

SYMBOLGEN:  Macro variable TARGLIB resolves to public
SYMBOLGEN:  Macro variable TARGETTABLE resolves to megacorp5_6
4                                                          The SAS System                          Friday, July  9, 2021 07:50:00 AM

102        
103        /*Multiplying rows to new dataset.*/
104        data &targlib..&targettable. (promote=yes);
105        	
SYMBOLGEN:  Macro variable TARGLIB resolves to public
SYMBOLGEN:  Macro variable STARTTABLE resolves to megacorp5_1m
105      !  set &targlib..&starttable.;
106        	do i=1 to &step.;
SYMBOLGEN:  Macro variable STEP resolves to 6
107        		output;
108        	end;
109        run;

NOTE: Running DATA step in Cloud Analytic Services.
NOTE: The DATA step will run in multiple threads.
ERROR: Cloud Analytic Services failed writing to system disk space. Please contact your administrator.

ERROR: DATA step was not able to promote table megacorp5_6 in caslib Public.
ERROR: Fatal error, action aborted: A previous operation failed due to mismatched operations across the grid. Further operations 
       can only be performed after the communicator is repaired.
NOTE: Executing action 'dataStep.runBinary' (attempt #2).
ERROR: Cloud Analytic Services failed writing to system disk space. Please contact your administrator.

ERROR: DATA step was not able to promote table megacorp5_6 in caslib Public.
ERROR: Fatal error, action aborted: A previous operation failed due to mismatched operations across the grid. Further operations 
       can only be performed after the communicator is repaired.
ERROR: A previous operation failed due to mismatched operations across the grid. Further operations can only be performed after the 
       communicator is repaired.
ERROR: The action stopped due to errors.
NOTE: The SAS System stopped processing this step because of errors.
NOTE: DATA statement used (Total process time):
      real time           30.10 seconds
      cpu time            0.02 seconds
      

110        
111        /*Saving data sets to CAS lib for loading prior to running the test on it.*/
112        proc casutil;
NOTE: The UUID 'c2080962-bc21-fb4d-90e6-c2595f075e12' is connected using session MYSESSION.
113        	
113      !  save casdata="&targettable." outcaslib="&targlib." replace;
SYMBOLGEN:  Macro variable TARGETTABLE resolves to megacorp5_6
SYMBOLGEN:  Macro variable TARGLIB resolves to public
ERROR: The file or path 'megacorp5_6' is not available in the file system. No space left on device
ERROR: Table 'megacorp5_6' could not be loaded.
ERROR: Failure opening table 'megacorp5_6': A table could not be loaded.
ERROR: The action stopped due to errors.
NOTE: The Cloud Analytic Services server processed the request in 0.002891 seconds.
ERROR: Failed to save the table "megacorp5_6" from the "public" caslib to the "public" caslib.
114        	
114      !  droptable incaslib="&targlib." casdata="&targettable.";
SYMBOLGEN:  Macro variable TARGLIB resolves to public
SYMBOLGEN:  Macro variable TARGETTABLE resolves to megacorp5_6
ERROR: The table megacorp5_6 could not be located in caslib Public of Cloud Analytic Services.
ERROR: The action stopped due to errors.
NOTE: The Cloud Analytic Services server processed the request in 0.020031 seconds.
115        	
115      !  droptable incaslib="&targlib." casdata="&starttable.";
5                                                          The SAS System                          Friday, July  9, 2021 07:50:00 AM

SYMBOLGEN:  Macro variable TARGLIB resolves to public
SYMBOLGEN:  Macro variable STARTTABLE resolves to megacorp5_1m
NOTE: Cloud Analytic Services dropped table megacorp5_1m from caslib Public.
NOTE: The Cloud Analytic Services server processed the request in 0.019805 seconds.
116        run;

117        quit;

NOTE: The SAS System stopped processing this step because of errors.
NOTE: PROCEDURE CASUTIL used (Total process time):
      real time           0.22 seconds
      cpu time            0.05 seconds
      
118        
119        cas mySession terminate;
NOTE: Libref CASUSER has been deassigned.
NOTE: Libref MYCASLIB has been deassigned.
NOTE: Libref SAMPLES has been deassigned.
NOTE: Libref PUBLIC has been deassigned.
NOTE: Libref MODELS has been deassigned.
NOTE: Libref HSBC has been deassigned.
NOTE: Libref FORMATS has been deassigned.
NOTE: Libref CASUSERH has been deassigned.
NOTE: Deletion of the session MYSESSION was successful.
NOTE: The default CAS session MYSESSION identified by SAS option SESSREF= was terminated. Use the OPTIONS statement to set the 
      SESSREF= option to an active session.
NOTE: Request to TERMINATE completed for session MYSESSION.
119      !                         	


ERROR: Errors printed on page 4.

NOTE: SAS Institute Inc., SAS Campus Drive, Cary, NC USA 27513-2414
NOTE: The SAS System used:
      real time           47.48 seconds
      cpu time            3.10 seconds
      
